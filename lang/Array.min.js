define(function(a,b,c){"use strict";var d=a("../Type");var e={identity:function(a){return a}};var f={};var g=Array.prototype,h=Object.prototype;var i=g.slice,j=g.unshift,k=h.toString,l=h.hasOwnProperty;var m=g.forEach,n=g.map,o=g.reduce,p=g.reduceRight,q=g.filter,r=g.every,s=g.some,t=g.indexOf,u=g.lastIndexOf,v=Array.isArray;(function(){this.each=this.forEach=function(a,b,c){if(a==null)return;if(m&&a.forEach===m){a.forEach(b,c)}else if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++){if(d in a&&b.call(c,a[d],d,a)===f)return}}else{for(var g in a){if(l.call(a,g)){if(b.call(c,a[g],g,a)===f)return}}}};this.map=function(a,b,c){var e=[];if(d(a)=="null")return e;if(n&&a.map===n)return a.map(b,c);this.each(a,function(a,d,f){e[e.length]=b.call(c,a,d,f)});if(a.length===+a.length)e.length=a.length;return e};this.some=function(a,b,c){b||(b=this.identity);var e=false;if(d(a)=="null")return e;if(s&&a.some===s)return a.some(b,c);this.each(a,function(a,d,g){if(e||(e=b.call(c,a,d,g)))return f});return!!e};this.find=function(a,b,c){var d;this.some(a,function(a,e,f){if(b.call(c,a,e,f)){d=a;return true}});return d};this.filter=function(a,b,c){var e=[];if(d(a)=="null")return e;if(q&&a.filter===q)return a.filter(b,c);this.each(a,function(a,d,f){if(b.call(c,a,d,f))e[e.length]=a});return e};this.every=this.all=function(a,b,c){var e=true;if(d(a)=="null")return e;if(r&&a.every===r)return a.every(b,c);this.each(a,function(a,d,g){if(!(e=e&&b.call(c,a,d,g)))return f});return!!e};this.shuffle=function(a){var b=[],c;this.each(a,function(a,d,e){c=Math.floor(Math.random()*(d+1));b[d]=b[c];b[c]=a});return b};this.indexOf=function(a,b){if(d(a)!=="array")return-1;var c,e;if(t&&a.indexOf===t)return a.indexOf(b);for(c=0,e=a.length;c<e;c++)if(c in a&&a[c]===b)return c;return-1};this.lastIndexOf=function(a,b){if(d(a)!=="array")return-1;if(u&&a.lastIndexOf===u)return a.lastIndexOf(b);var c=a.length;while(c--){if(c in a&&a[c]===b)return c}return-1};this.isArray=v||function(a){return d(a)=="array"}}).call(e);c.exports=e})