define(function(a,b,c){var d=a("../Type");var e=a("./Object");var f={};f.extend=function(a,b){b=d(b)=="boolean"?b:true;e.extend(this,a,b);if(a.extended){a.extended.apply(this,arguments)}};f.include=function(a,b){b=d(b)=="boolean"?b:true;for(var c in a){if(c in this.prototype){if(!b){continue}else{this.prototype[c]=a[c];this.prototype[c]["_base_name"]=c.toString()}}else this.prototype[c]=a[c]}if(a.included){a.included.apply(this,arguments)}};f.create=function(){var a,b;if(!!arguments[0]){if(d.isFunction(arguments[0])){a=arguments[0];b=arguments[1]}else if(d(arguments[0])=="object"){a=null;b=arguments[0]}}var c=function(){this.base("initialize",arguments);this.initialize.apply(this,arguments)},h={};if(!!a){h=e.create(a.prototype);c.prototype=h;c.prototype.constructor=c;c.superClass=a}else{c.superClass=null}e.extend(c,f,true);c.extend(g);c.include({initialize:function(){this.base("initialize",arguments)},base:function(a,b){var c,e=dep=0,f=[];if(d(a)==="string"){++e;c=a;b=arguments[e]?arguments[e]:[].slice.apply(arguments.callee.caller.arguments,[1])}else{c=arguments.callee.caller["_base_name"];b=b?b:[]}var g=this.constructor;if(!!c&&c!=="initialize"&&g.superClass){var h=g.superClass.prototype;if(!!h[c]){f.push(h[c]);dep--}}while(dep>=0&&g.superClass){var h=g.superClass.prototype;if(!!h[c]){f.push(h[c]);dep++}g=g.superClass}for(var i=f.length-1;i>=0;i--){f[i].apply(this,b)}}});if(!!b)c.include(b,true);return c};var g={init:function(a){var b=new this(a);return b}};c.exports=f})